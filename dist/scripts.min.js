function showLoadingMessage(){$("#loadingModal").modal({backdrop:"static",keyboard:!1})}function hideLoadingMessage(){$("#loadingModal").modal("hide")}function buildElement(e,t,n=null,o=null,i=null){if("string"!=typeof e){console.error("buildElement: Enter valid HTML for createElementText");return}let l=document.createElement("p");l.innerHTML=e;if(1!==l.childNodes[0].nodeType){console.error("buildElement: Enter valid HTML for createElementText");return}let a=$(e);return t&&"string"==typeof t&&a.append(document.createTextNode(t)),n&&(Array.isArray(n)?n.forEach(e=>{"string"==typeof e&&a.addClass(e)}):"string"==typeof n&&a.addClass(n)),o&&i&&"string"==typeof o&&"function"==typeof i&&a.on(o,i),a}let modalRepo=function(){let e=null,t=null;function n(n){var o;let i=(o=n).touches||o.originalEvent.touches;e=i[0].clientX,t=i[0].clientY}function o(){e=null,t=null}return{showModal:function i(l){let a=$("#infoModal .modal-dialog"),r=$("#infoModal .modal-title"),s=$(".modal-body");r.empty(),s.empty();let d=buildElement("<h2></h2>","#"+l.id+" "+l.name);r.append(d),s.append(buildElement("<p></p>",l.flavorText));let p=buildElement("<ul></ul>",null,"pokemon-stats"),u=buildElement("<li></li>","Height: ");p.append(u),u.append(buildElement("<p></p>",l.height.toString()));let c="Type:",m=buildElement("<li></li>",c);p.append(m),c="";for(let f=0;f<l.types.length;f++)c+=l.types[f].type.name,f!==l.types.length-1&&(c+=", ");m.append(buildElement("<p></p>",c));let h=buildElement("<li></li>",c="Abilities: ");p.append(h),c="";for(let g=0;g<l.abilities.length;g++)c+=l.abilities[g].ability.name,g!==l.types.length-1&&(c+=", ");h.append(buildElement("<p></p>",c)),s.append(p);let y=buildElement("<div></div>",null,"modal-image-container"),b=pokemonRepository.getAll(),E=b.indexOf(l);if(0!==E){let k=buildElement("<button></button>","<","modal-prev","click",()=>{pokemonRepository.showDetails(b[E-1])});y.append(k)}let L=buildElement("<img>",null,"modal-picture");if(L.attr("src",l.imageURL),L.attr("alt",l.name),y.append(L),E!==b.length-1){let R=buildElement("<button></button>",">","modal-next","click",()=>{pokemonRepository.showDetails(b[E+1])});y.append(R)}s.append(y),a.on("touchstart",n),a.on("touchend",o),a.on("touchcancel",o),a.on("touchmove",n=>(function n(o){if(!e||!t)return;let i=o.touches[0].clientX,l=o.touches[0].clientY,a=i-e;if(Math.abs(a)>Math.abs(l-t)){let r=pokemonRepository.getAll(),s=r.indexOf(pokemonRepository.getCurrent());a>0?s!==r.length-1&&pokemonRepository.showDetails(r[s+1]):0!==s&&pokemonRepository.showDetails(r[s-1])}e=null,t=null})(n))}}}(),pokemonRepository=function(){let e=[],t=null;function n(t){if("object"==typeof t){let n=Object.keys(t);if(n.includes("name")&&n.includes("detailsURL")){e.push(t);return}}}function o(){return e}function i(){return t}function l(t){return e.filter(e=>e.name.includes(t.toUpperCase()))}function a(e){let t=$("<li></li>");t.addClass("list-group-item");let n=buildElement("<button></button>",e.name,["btn","btn-primary","custom-button"],"click",()=>{p(e)});n.attr("data-toggle","modal"),n.attr("data-target","#infoModal"),n.attr("id",e.name);let o=$("<img>");o.attr("height","100"),o.attr("width","100"),n.append(o),t.append(n);$(".pokemonList").append(t)}function r(){$(".pokemonList").empty()}function s(){for(let t=0;t<e.length;t++){let n=$("#"+e[t].name+" img");n.attr("src",e[t].imageURL),t<10&&n.attr("loading","lazy"),n.attr("height","100"),n.attr("width","100"),n.attr("alt",e[t].name+" image")}}function d(e){return fetch(e.detailsURL).then(function(e){return e.json()}).then(function(t){e.imageURL=t.sprites.front_default,e.height=t.height,e.types=t.types,e.id=t.id,e.abilities=t.abilities,e.infoURL=t.species.url}).catch(function(e){console.error(e),hideLoadingMessage()})}function p(e){showLoadingMessage(),d(e).then(function(){var n;t=e;fetch((n=e).infoURL).then(function(e){return e.json()}).then(function(e){n.flavorText=e.flavor_text_entries[0].flavor_text,n.flavorText=n.flavorText.replaceAll("\n"," "),hideLoadingMessage()}).catch(function(e){console.error(e),hideLoadingMessage()}).then(function(){modalRepo.showModal(e)})})}return{add:n,getAll:o,getFiltered:l,addListItem:a,printFiltered:function t(n){""===n?(r(),e.forEach(function(e){a(e)})):(r(),l(n).forEach(function(e){a(e)})),s()},loadList:function e(){return showLoadingMessage(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name.toUpperCase(),detailsURL:e.url})}),hideLoadingMessage()}).catch(function(e){console.error(e),hideLoadingMessage()})},loadDetails:d,showDetails:p,getCurrent:i,showPokemonImages:s}}();pokemonRepository.loadList().then(function(){$(".pokemonList").empty();let e=[];pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)}),pokemonRepository.getAll().forEach(function(t){e.push(pokemonRepository.loadDetails(t))}),Promise.allSettled(e).then(function(){pokemonRepository.showPokemonImages()})});let searchBar=document.querySelector("#search");searchBar.addEventListener("input",function(e){pokemonRepository.printFiltered(e.target.value)});